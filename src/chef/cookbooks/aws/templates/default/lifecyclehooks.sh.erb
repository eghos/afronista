#!/usr/bin/env bash
# Bash script to call complete the lifecycle action on launching EC2 instances

region=$(curl --silent http://169.254.169.254/latest/dynamic/instance-identity/document | grep region |cut -d '"' -f4)
instance_id=$(curl --silent http://169.254.169.254/latest/meta-data/instance-id)

aws autoscaling complete-lifecycle-action --lifecycle-action-result CONTINUE --instance-id $instance_id --lifecycle-hook-name <%= @LIFECYCLE__HOOK %> --auto-scaling-group-name <%= @AUTOSCALING__GROUP %> --region $region
